# 3D Image Maker for Architects Using Google Maps by NanoBanana

このプロジェクトは、Google Maps情報とNanoBanana AIを使用して、建築家向けの3つのタイプの3D画像を生成するWebアプリケーション「D Image Maker for Architects Using Google Maps by NanoBanana」生成プロジェクトです。

## プロジェクト概要

### 基本情報
- **プロジェクト名**: 3D Image Maker for Architects Using Google Maps by NanoBanana
- **技術スタック**: React 18.3.1 + TypeScript + Vite + Tailwind CSS
- **API統合**: Google Maps API (Places API, Geocoding API) + NanoBanana AI
- **主要機能**: 住所検索、地図表示、3D画像生成

### アプリケーションの目的
世界中の任意の場所（住所・建物名・座標）を指定し、その50m²範囲のGoogleマップ情報を基に、建築家向けの3つの異なるスタイルの3D画像を自動生成するツールです。

## 主要機能仕様

- APIはNanoBananaにおいては、必ずYouWareのMCP機能を使用して有効化する。
- Places API, Geocoding APIについては、ユーザーが提供したAPIキーを使用する。

### 1. 検索機能
**Places APIを使用した多言語対応検索システム**

#### 検索方法
- **住所検索**: 「東京都世田谷区太子堂3丁目30番31号」
- **国際住所**: 「Av. Gustave Eiffel, 75007 Paris」
- **建物名検索**: 「東京タワー」、「渋谷ヒカリエ」
- **座標入力**: 緯度経度による直接指定

#### サジェスト機能
入力に応じてリアルタイムでGoogle Places APIから5つほど候補を取得:
```
入力例：「渋谷ヒカリエ」
サジェスト表示：
- 渋谷ヒカリエ｜渋谷区 渋谷 東京都 日本
- 渋谷スクランブルスクエア｜渋谷区 渋谷 東京都 日本
- 渋谷マークシティ｜道玄坂 渋谷区 東京都 日本
- 渋谷区役所｜宇田川町 渋谷区 東京都 日本
```

#### プリセットボタン
すぐに試せる有名な場所のサンプルボタンを3つ用意

### 2. 地図表示機能
**Google Maps API統合による高精度マップ表示**

#### 表示仕様
- **ズームレベル**: 19（建物の詳細が見える高倍率）
- **キャプチャ範囲**: 50m × 50m（視覚的にオレンジの矩形で表示）
- **デフォルト位置**: 自由の女神像（lat: 40.6892, lng: -74.0445）
- **マップタイプ**: ロードマップ（2D、3Dティルトなし）

#### インタラクティブ機能
- 場所選択時のリアルタイム地図更新
- マーカー自動配置
- 50m²範囲の視覚的表示（半透明オレンジ矩形）

### 3. 3D画像生成機能
**NanoBanana AIによる3タイプの建築画像生成**

#### 各画像に共通する生成時の仕様
- すべてNanoBananaを使用して、Googleマップの情報をもとにした立体画像を45°の角度から見た状態で生成する。
- "ROOF ANGLE 45°”のように記載を入れる。
  - 対象が建造物の場合は、地上から建造物の最先端までが画像に余白のある状態で収まるよう、角度を調整する。
  - ただし、その角度は3つの画像すべてで共通の角度にする。
- Googleマップのスケールをもとに、建物の横幅・高さ・道路幅をメートル単位で正確に数値化する。
  - 建築家がCAD参照にできるよう、図面さながらの寸法線を付与。
  - 寸法はmm単位（例：18000 mm）または小数表記を併用して（例：18.00 m）のように記載する。
- Googleロゴやimageryのような表示はしない。
- 北を示すマークや縮尺は右端に残す。
- 場所の名前の記載はしない。
- 建造物を対象とする場合は、周辺の道路や街路樹、近隣の住居や建造物などを表示しない。
- 寸法線と数値ラベル付き
- 線が太細のような強弱、陰影やハッチングで立体感を強調する。
- 各画像をダウンロードする際は、右下には生成した年月日と時間と画像の種類を記載したファイル名にする。
  - 例：2024-01-12-1824-hologram.png
- 縦・横だけではなく、対象の細かいパーツの寸法注釈まで詳しく測定値を表示する。

#### 生成される画像タイプ

##### 1. 3次元アイソメトリック画像（Three-dimensional isometric images）
- **スタイル**: Minecraft HD-2Dピクセルアート風アイソメトリック建築図面
- **特徴**: 
  - 寸法線と数値ラベル付き
  - ゲーム『Minecraft』のHD-2Dスタイルで作成する
  - sample/2025-05-01-0024-isometric.pngにより細かい採寸を追記するイメージで生成する。

##### 2. 3次元ホログラム画像（Three-dimensional hologram images）
- **スタイル**: 未来的ホログラフィック技術図面
- **特徴**:
  - シアン/ブルーの発光ワイヤーフレーム
  - sample/2024-01-12-1824-hologram.pngのようなイメージでホログラム画像を生成する。
  - ボクセルグリッドシステム維持
  - ホログラム風グローエフェクト

##### 3. 3次元線画（Three-dimensional line drawings）
- **スタイル**: モノクロ技術線画
- **特徴**:
  - クリーンな白黒技術図面
  - 必ず対象には白と黒だけを使い、他の色は使用しないこと
  - 線が太め、陰影やハッチングなどで立体感を強調する 
  - アイソメトリック視点維持。
  - 差分がわかりやすいよう、寸法及び長さを示す線それぞれを#125ae0で記載する。

#### 生成プロセス
1. **マップキャプチャ**: Selectの50m²範囲を高解像度でキャプチャ
2. **段階的生成**: レート制限対応のため順次生成
   - アイソメトリック画像 → ホログラム画像 → 線画
3. **リアルタイム表示**: 各画像が完成次第、即座に表示
4. **プログレスバー**: 生成進捗を視覚的に表示

## 技術仕様

### 外部API統合
```
Google Maps APIs:
├── Places API (住所・建物名検索)
├── Geocoding API (座標変換)
└── Maps JavaScript API (地図表示)

AI生成:
└── NanoBanana API (3D画像生成)
```


### 必要なAPI設定

#### Google Maps API
以下のAPIを有効化する必要があります：
- **Places API**: 住所・建物名検索機能
- **Geocoding API**: 座標変換機能  
- **Maps JavaScript API**: 地図表示機能
- これら3つのAPIキーは開発者が保有するAPIキーを使用（.envファイルに記載あり）

#### NanoBanana API
- YouWare上でのMCPを通して開発



## 使用方法

### 基本的な使い方
1. **場所を選択**
   - プリセットボタンをクリック、または
   - 検索バーに住所・建物名を入力してサジェストから選択

2. **地図確認**
   - SelectがGoogleマップに表示される
   - オレンジ色の矩形が50m²のキャプチャ範囲を示す

3. **画像生成**
   - 「Generate!」ボタンをクリック
   - 3つの画像が順次生成される（約2-6分）

4. **結果の利用**
   - 生成された画像を個別にダウンロード可能
   - Base64またはURL形式で画像を取得
